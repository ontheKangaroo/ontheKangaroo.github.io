<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Compilers - A Simple Syntax-Directed Translator | ontheKangaroo&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.70789133.css" as="style"><link rel="preload" href="/assets/js/app.ea94f279.js" as="script"><link rel="preload" href="/assets/js/6.31afc1fb.js" as="script"><link rel="preload" href="/assets/js/4.36f6eb39.js" as="script"><link rel="preload" href="/assets/js/14.58c97a1d.js" as="script"><link rel="prefetch" href="/assets/js/10.54382e2d.js"><link rel="prefetch" href="/assets/js/11.47f9f502.js"><link rel="prefetch" href="/assets/js/12.0a8c843b.js"><link rel="prefetch" href="/assets/js/13.d8244820.js"><link rel="prefetch" href="/assets/js/15.fa721833.js"><link rel="prefetch" href="/assets/js/16.659ca688.js"><link rel="prefetch" href="/assets/js/17.00daaf04.js"><link rel="prefetch" href="/assets/js/18.20d05ac4.js"><link rel="prefetch" href="/assets/js/19.609b21a2.js"><link rel="prefetch" href="/assets/js/20.448f69b7.js"><link rel="prefetch" href="/assets/js/21.31d0b415.js"><link rel="prefetch" href="/assets/js/22.4693720e.js"><link rel="prefetch" href="/assets/js/23.75f9e519.js"><link rel="prefetch" href="/assets/js/24.4b002ad7.js"><link rel="prefetch" href="/assets/js/25.a8d973a4.js"><link rel="prefetch" href="/assets/js/26.6a23453c.js"><link rel="prefetch" href="/assets/js/27.7225c6ac.js"><link rel="prefetch" href="/assets/js/28.e6158d49.js"><link rel="prefetch" href="/assets/js/29.278cd7cd.js"><link rel="prefetch" href="/assets/js/30.101ed4a0.js"><link rel="prefetch" href="/assets/js/31.d8d935b9.js"><link rel="prefetch" href="/assets/js/32.5b4fbc9c.js"><link rel="prefetch" href="/assets/js/33.37719d60.js"><link rel="prefetch" href="/assets/js/34.85393f72.js"><link rel="prefetch" href="/assets/js/35.2b245a12.js"><link rel="prefetch" href="/assets/js/36.0577e35c.js"><link rel="prefetch" href="/assets/js/37.c5f5a284.js"><link rel="prefetch" href="/assets/js/38.e27dc57e.js"><link rel="prefetch" href="/assets/js/39.2dff798f.js"><link rel="prefetch" href="/assets/js/40.9aa9885d.js"><link rel="prefetch" href="/assets/js/41.f781d248.js"><link rel="prefetch" href="/assets/js/42.90b449dd.js"><link rel="prefetch" href="/assets/js/43.70aeeac7.js"><link rel="prefetch" href="/assets/js/44.a76e1594.js"><link rel="prefetch" href="/assets/js/45.2d68289e.js"><link rel="prefetch" href="/assets/js/46.ff2764bf.js"><link rel="prefetch" href="/assets/js/47.41e6e1d7.js"><link rel="prefetch" href="/assets/js/48.adb17fcf.js"><link rel="prefetch" href="/assets/js/49.c3eedc12.js"><link rel="prefetch" href="/assets/js/5.111c1626.js"><link rel="prefetch" href="/assets/js/7.13a11985.js"><link rel="prefetch" href="/assets/js/8.520c3661.js"><link rel="prefetch" href="/assets/js/9.97adc665.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.8f6b7985.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.44cad153.js">
    <link rel="stylesheet" href="/assets/css/0.styles.70789133.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">ontheKangaroo's Blog
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about.html" class="nav-link">About</a></li><li class="nav-item"><a href="https://onthekangaroo.github.io/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">RSS</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">ontheKangaroo's Blog
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Home</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/about.html" class="nav-link">About</a></li><li class="mobile-nav-item"><a href="https://onthekangaroo.github.io/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">RSS</a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><div class="content__default"><h1 id="a-simple-syntax-directed-translator"><a href="#a-simple-syntax-directed-translator" class="header-anchor">#</a> A Simple Syntax-Directed Translator</h1> <p>e.g.</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span> <span class="token keyword">int</span> j<span class="token punctuation">;</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> a<span class="token punctuation">;</span> <span class="token keyword">float</span> v<span class="token punctuation">;</span> <span class="token keyword">float</span> x<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">do</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">do</span> j <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> j<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        x <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>translation</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1: i = i + 1
2: t1 = a[i]
3: if t1 &lt; v goto 1
4: j = j - 1
5: t2 = a[j]
6: if t2 &gt; v goto 9
7: ifFalse i &gt;= j goto 9
8: goto 14
9: x = a[i]
10: t2 = a[j]
11: a[i] = t3
12: a[j] = x
13: goto 1
14:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_1-introduction"><a href="#_1-introduction" class="header-anchor">#</a> 1. Introduction</h2> <ul><li><p>A compiler breaks up a cource program into constituent pieces and produces an internal representation for it.</p> <ul><li><p>natation: context-free grammars / Backus-Naur Form</p></li> <li><p>grammar-roiented compiling technique: <em>syntax-directed translation</em></p></li> <li><p>infix expressions -&gt; postfix expressions</p></li> <li><p>inttermediate-code generation</p> <ul><li><p>abstract syntax trees</p></li> <li><p>three-address code</p></li></ul></li></ul></li></ul> <h2 id="_2-syntax-definition"><a href="#_2-syntax-definition" class="header-anchor">#</a> 2. Syntax Definition</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code>stmt <span class="token operator">-&gt;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>expr<span class="token punctuation">)</span> stmt <span class="token keyword">else</span> stmt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>rule: <em>production</em></p></li> <li><p>lexical elements: <em>terminals</em></p></li> <li><p>variables: <em>nonterminals</em></p></li></ul> <h3 id="_2-1-definition-of-grammars"><a href="#_2-1-definition-of-grammars" class="header-anchor">#</a> 2.1 Definition of Grammars</h3> <ul><li><p>components of a context-free grammar</p> <ul><li><p>a set of <em>terminal</em> symbols, aka <em>tokens</em></p></li> <li><p>a set of <em>nonterminals</em>, aka <em>syntactic variables</em></p></li> <li><p>a set of <em>productions</em></p> <ul><li><p>a nonterminal: <em>head</em> or <em>left side</em> of the preoduction</p></li> <li><p>an arrow</p></li> <li><p>a sequence of terminals and/or nonterminals: <em>body</em> or <em>right side</em> of production</p></li> <li><p>a designation of one of the nonterminals as the <em>start</em> symbol</p></li></ul></li></ul></li></ul> <p>e.g.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>list -&gt; list + digit
list -&gt; list - digit
list -&gt; digit
digit -&gt; 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>A production is <em>for</em> a nonterminal if the nontermial is the head of the production. A string of terminals is a sequence of zero or more terminals. The string of zero terminals, written as <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">ϵ</span></span></span></span>, is called the <em>empty</em> string.</p> <h3 id="_2-2-derivations"><a href="#_2-2-derivations" class="header-anchor">#</a> 2.2 Derivations</h3> <p>The terminal strings that can be derived from the start symbol form the language defined by the grammar.</p> <p>e.g. function call</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>call -&gt; id(optparams)
optparams -&gt; params | epsilon
params -&gt; params, param | param
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>parsing: take a string of terminals and figure out how to derive it from the start symbol of the grammar; report syntax errors</li></ul> <h3 id="_2-3-parse-trees"><a href="#_2-3-parse-trees" class="header-anchor">#</a> 2.3 Parse Trees</h3> <ul><li><p>parse tree</p> <ul><li><p>the root is labeled by the start symbol</p></li> <li><p>each leaf is labled by a terminal or by epsilon</p></li> <li><p>each interior node is labeled by a nonterminal</p></li> <li><p>If A is the nonterminal labeling some interior node and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">X_1, X_2, ..., X_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> are the labels of the children of that node from left to right, then there must be a production  <code>A -&gt; X1X2...Xn</code></p></li></ul></li> <li><p>tree terminology</p> <ul><li><p>A tree consists of one or more <em>nodes</em>. <em>Nodes</em> may have <em>labels</em></p></li> <li><p>Exactly one node is the <em>root</em>. All nodes except the root have a unique <em>parent</em>; the root has no parent.</p></li> <li><p>If node  <code>N</code>  is the parent of node  <code>M</code> , then  <code>M</code>  is a <em>child</em> of  <code>N</code> . The children of one node are called <em>siblings</em>. They have an order, <em>from the left</em>.</p></li> <li><p>A node with no children is called a <em>leaf</em>. Other nodes those with one or more children are <em>interior nodes</em>.</p></li> <li><p>A <em>descendant</em> of a node  <code>N</code>  is either  <code>N</code>  itself,, a child of  <code>N</code> , a child of a child of  <code>N</code> , and so on, for any number of levels. We say node  <code>N</code>  is an <em>ancestor</em> of node  <code>M</code>  if  <code>M</code>  is a descendant of  <code>N</code> .</p></li></ul></li></ul> <h3 id="_2-4-ambiguity"><a href="#_2-4-ambiguity" class="header-anchor">#</a> 2.4 Ambiguity</h3> <ul><li>ambiguous: a grammar has more than one parse tree generating a giben string of terminals</li></ul> <h3 id="_2-5-associativity-of-operators"><a href="#_2-5-associativity-of-operators" class="header-anchor">#</a> 2.5 Associativity of Operators</h3> <ul><li><p>left-associative: addition, subtraction, multiplication, division</p></li> <li><p>right-associative: exponentiation, assignment</p></li></ul> <h3 id="precedence-of-operators"><a href="#precedence-of-operators" class="header-anchor">#</a> Precedence of Operators</h3> <p>e.g.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>expr -&gt; expr + term | expr - term | term
term -&gt; term * factor | term / factor | factor
factor -&gt; digit | (expr)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>grammar</p> <ul><li><p><code>factor</code> : an expression that cannot be torn apart</p></li> <li><p><code>term</code> : can be torn apart by the highest precedence</p></li> <li><p><code>expr</code> : can be torn apart by any operator</p></li></ul></li></ul> <p>e.g.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>stmt -&gt; id = expr;
     |  if (expr) stmt
     |  if (expr) stmt else stmt
     |  while (expr) stmt
     |  do stmt while (expr);
p     |  {stmts}
     
stmts -&gt; stmts stmt
     | epsilon
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-introduction" title="1. Introduction">1. Introduction</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-syntax-definition" title="2. Syntax Definition">2. Syntax Definition</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-1-definition-of-grammars" title="2.1 Definition of Grammars">2.1 Definition of Grammars</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-2-derivations" title="2.2 Derivations">2.2 Derivations</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-3-parse-trees" title="2.3 Parse Trees">2.3 Parse Trees</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-4-ambiguity" title="2.4 Ambiguity">2.4 Ambiguity</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-5-associativity-of-operators" title="2.5 Associativity of Operators">2.5 Associativity of Operators</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#precedence-of-operators" title="Precedence of Operators">Precedence of Operators</a></div></div></div></div> <footer class="footer" data-v-27b9d15d><div class="footer-left-wrap" data-v-27b9d15d><ul class="contact" data-v-27b9d15d></ul></div> <div class="footer-right-wrap" data-v-27b9d15d><ul class="copyright" data-v-27b9d15d></ul></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ea94f279.js" defer></script><script src="/assets/js/6.31afc1fb.js" defer></script><script src="/assets/js/4.36f6eb39.js" defer></script><script src="/assets/js/14.58c97a1d.js" defer></script>
  </body>
</html>
